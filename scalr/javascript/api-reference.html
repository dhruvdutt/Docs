<html><head><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}</style>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width">

  <title>Appbase Documentation</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" type="text/css" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../../bower_components/bootstrap/dist/css/bootstrap-theme.min.css">

  <script async="" src="http://www.google-analytics.com/analytics.js"></script><script type="text/javascript" src="../../bower_components/docbase/scripts/polyfill.js"></script>
  <!-- Flatdoc -->
  <script type="text/javascript" src="../../bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="../../bower_components/flatdoc/legacy.js"></script>
  <script type="text/javascript" src="../../bower_components/flatdoc/flatdoc.js"></script>

  <!-- Flatdoc theme -->
  <link rel="stylesheet" type="text/css" href="../../bower_components/flatdoc/theme-white/style.css">
  <script type="text/javascript" src="../../bower_components/docbase/scripts/flatdoc-theme.js"></script>

  <!-- DocBase -->
  <script type="text/javascript" src="../../bower_components/angular/angular.js"></script>
  <script type="text/javascript" src="../../bower_components/angular-route/angular-route.js"></script>
  <script type="text/javascript" src="../../bower_components/js-schema/js-schema.min.js"></script>

  <script type="text/javascript" src="../../bower_components/docbase/scripts/docbase.js"></script>
  <script src="../../bower_components/google-code-prettify/bin/prettify.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../../bower_components/google-code-prettify/bin/prettify.min.css">
  <link rel="stylesheet" type="text/css" href="../../bower_components/docbase/styles/main.css">
  <link rel="stylesheet" type="text/css" href="../../bower_components/components-font-awesome/css/font-awesome.min.css">
  

  <!-- Custom -->
  <link rel="stylesheet" type="text/css" href="../../styles/docs.css">

</head>
<body role="flatdoc" class="big-h3">
  <!--[if lt IE 10]>
     <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->

  <!-- ngView:  --><div ng-view="" class="ng-scope"><!-- ngInclude: 'html/navbar.html' --><nav class="navbar navbar-default navbar-fixed-top ng-scope" ng-include="'html/navbar.html'"><div class="container-fluid ng-scope">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <a id="docs-appbase-logo" class="navbar-brand" href="http://docs.appbase.io">
      <img src="../../images/logo.svg">
    </a>
  </div>

  <div class="collapse navbar-collapse" id="navbar-collapse">
    <ul class="nav navbar-nav">
      <!-- ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
        <a ng-href="#/scalr/FAQs" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/scalr/FAQs">FAQs</a>
        <ul class="dropdown-menu">
          <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
            <a ng-href=../../scalr/FAQs/jsapi.html ng-bind="file.label" class="ng-binding" href=../../scalr/FAQs/jsapi.html>JS API</a>
          </li><!-- end ngRepeat: file in folder.files -->
        </ul>
      </li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
        <a ng-href="#/scalr/concepts" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/scalr/concepts">Concepts</a>
        <ul class="dropdown-menu">
          <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
            <a ng-href=../../scalr/concepts/datamodel.html ng-bind="file.label" class="ng-binding" href=../../scalr/concepts/datamodel.html>Data Model</a>
          </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
            <a ng-href=../../scalr/concepts/intro.html ng-bind="file.label" class="ng-binding" href=../../scalr/concepts/intro.html>Intro</a>
          </li><!-- end ngRepeat: file in folder.files -->
        </ul>
      </li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
        <a ng-href="#/scalr/javascript" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/scalr/javascript">Javascript</a>
        <ul class="dropdown-menu">
          <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
            <a ng-href=../../scalr/javascript/api-reference.html ng-bind="file.label" class="ng-binding" href=../../scalr/javascript/api-reference.html>JS API Reference</a>
          </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
            <a ng-href=../../scalr/javascript/javascript-intro.html ng-bind="file.label" class="ng-binding" href=../../scalr/javascript/javascript-intro.html>JS Quick Start</a>
          </li><!-- end ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
            <a ng-href=../../scalr/javascript/nodejs-intro.html ng-bind="file.label" class="ng-binding" href=../../scalr/javascript/nodejs-intro.html>Node Quick Start</a>
          </li><!-- end ngRepeat: file in folder.files -->
        </ul>
      </li><!-- end ngRepeat: folder in map[currentVersion] --><li class="dropdown ng-scope" ng-repeat="folder in map[currentVersion]">
        <a ng-href="#/scalr/rest" class="dropdown-toggle ng-binding" data-toggle="dropdown" role="button" aria-expanded="false" ng-bind="folder.label" href="#/scalr/rest">REST</a>
        <ul class="dropdown-menu">
          <!-- ngRepeat: file in folder.files --><li ng-repeat="file in folder.files" class="ng-scope">
            <a ng-href=../../scalr/rest/intro.html ng-bind="file.label" class="ng-binding" href=../../scalr/rest/intro.html>Quick Start</a>
          </li><!-- end ngRepeat: file in folder.files -->
        </ul>
      </li><!-- end ngRepeat: folder in map[currentVersion] -->
    </ul>

    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
           <span ng-bind="currentVersion" class="ng-binding">scalr</span> <span class="caret"></span>
        </a>
        <ul class="dropdown-menu version-switcher" role="menu">
          <!-- ngRepeat: version in versions --><li ng-repeat="version in versions" class="ng-scope">
            <a ng-href=../../scalr/concepts/intro.html ng-bind="version" class="ng-binding" href=../../scalr/concepts/intro.html>scalr</a>
          </li><!-- end ngRepeat: version in versions --><li ng-repeat="version in versions" class="ng-scope">
            <a ng-href=../../v2.0/concepts/datamodel.html ng-bind="version" class="ng-binding" href=../../v2.0/concepts/datamodel.html>v2.0</a>
          </li><!-- end ngRepeat: version in versions --><li ng-repeat="version in versions" class="ng-scope">
            <a ng-href=../../v3.0/changelog/changelog.html ng-bind="version" class="ng-binding" href=../../v3.0/changelog/changelog.html>v3.0</a>
          </li><!-- end ngRepeat: version in versions -->
        </ul>
      </li>
      <li class="github-star">
        <iframe src="https://ghbtns.com/github-btn.html?user=appbaseio&amp;repo=Docs&amp;type=star&amp;count=true" frameborder="0" scrolling="0" width="170px" height="20px"></iframe>
      </li>
    </ul>
  </div><!-- /.navbar-collapse -->
</div><!-- /.container-fluid -->
</nav>
<div role="flatdoc" class="content-root ng-scope">
  <div class="menubar fixed">
    <div class="menu section" role="flatdoc-menu"><ul><li id="root-item" class="level-0"><ul class="level-1" id="root-list"><li id="javascript-api-reference-item" class="level-1"><a id="javascript-api-reference-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference" class="level-1" pref="#javascript-api-reference">Javascript API Reference</a><ul class="level-2" id="javascript-api-reference-list"><li id="javascript-api-reference-setup-item" class="level-2"><a id="javascript-api-reference-setup-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-setup" class="level-2" pref="#javascript-api-reference-setup">SETUP</a><ul class="level-3" id="javascript-api-reference-setup-list"><li id="javascript-api-reference-setup-new-appbase-item" class="level-3"><a id="javascript-api-reference-setup-new-appbase-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-setup-new-appbase" class="level-3" pref="#javascript-api-reference-setup-new-appbase">new Appbase()</a></li></ul></li><li id="javascript-api-reference-writing-data-item" class="level-2"><a id="javascript-api-reference-writing-data-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-writing-data" class="level-2" pref="#javascript-api-reference-writing-data">WRITING DATA</a><ul class="level-3" id="javascript-api-reference-writing-data-list"><li id="javascript-api-reference-writing-data-index-item" class="level-3"><a id="javascript-api-reference-writing-data-index-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-writing-data-index" class="level-3" pref="#javascript-api-reference-writing-data-index">index()</a></li><li id="javascript-api-reference-writing-data-delete-item" class="level-3"><a id="javascript-api-reference-writing-data-delete-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-writing-data-delete" class="level-3" pref="#javascript-api-reference-writing-data-delete">delete()</a></li><li id="javascript-api-reference-writing-data-bulk-item" class="level-3"><a id="javascript-api-reference-writing-data-bulk-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-writing-data-bulk" class="level-3" pref="#javascript-api-reference-writing-data-bulk">bulk()</a></li></ul></li><li id="javascript-api-reference-streaming-data-item" class="level-2"><a id="javascript-api-reference-streaming-data-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-streaming-data" class="level-2" pref="#javascript-api-reference-streaming-data">STREAMING DATA</a><ul class="level-3" id="javascript-api-reference-streaming-data-list"><li id="javascript-api-reference-streaming-data-streamdocument-item" class="level-3"><a id="javascript-api-reference-streaming-data-streamdocument-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-streaming-data-streamdocument" class="level-3" pref="#javascript-api-reference-streaming-data-streamdocument">streamDocument()</a></li><li id="javascript-api-reference-streaming-data-streamsearch-item" class="level-3"><a id="javascript-api-reference-streaming-data-streamsearch-link" href="../../scalr/javascript/api-reference.html#javascript-api-reference-streaming-data-streamsearch" class="level-3" pref="#javascript-api-reference-streaming-data-streamsearch">streamSearch()</a></li></ul></li></ul></li></ul></li></ul></div>
  </div>
  <div role="flatdoc-content" class="content"><h1 id="javascript-api-reference">Javascript API Reference</h1><p>Appbase.JS is a minimalistic library for data streams.</p><p>It can:</p><ul>
<li>Continuously stream updates to documents, queries or filters over websockets (for browsers) and http-streams.</li>
<li>Index new documents or update / delete existing ones.</li>
<li>Is compatible with <a href="https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/index.html">elasticsearch.js</a>, which can be used for modifying the ES configurations and for using more esoteric methods.</li>
</ul><p>You can read the <a href="http://docs.appbase.io/scalr/javascript/javascript-intro.html">Javascript</a> or <a href="http://docs.appbase.io/scalr/javascript/nodejs-intro.html">Node.JS</a> quick-start guides for installation and basic usage.</p><h2 id="javascript-api-reference-setup">SETUP</h2><h3 id="javascript-api-reference-setup-new-appbase">new Appbase()</h3><p>Returns a new Appbase object (refered to as <code>appbaseObj</code> in all the following examples) using the <code>url</code>, <code>appname</code> and <code>username</code>:<code>password</code> credentials.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> appbaseObj </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Appbase</span><span class="pun">({</span><span class="pln">
    </span><span class="string"><span class="str">"url"</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"https:</span><span class="comment"><span class="str">//scalr.api.appbase.io"</span></span><span class="pun">,</span></span><span class="pln">
    </span><span class="string"><span class="str">"appname"</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">YOUR_APP_NAME</span><span class="pun">&gt;,</span><span class="pln">
    </span><span class="string"><span class="str">"username"</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">APP_CREDENTIAL</span><span class="pun">&gt;,</span><span class="pln">
    </span><span class="string"><span class="str">"password"</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">APP_SECRET</span><span class="pun">&gt;</span><span class="pln">
</span><span class="pun">})</span></code></pre><p><strong>Usage</strong></p><p><code>new Appbase(appData)</code></p><ul>
<li><p><strong>appData</strong> <code>Object</code> - A Javascript object containing the following fields and values</p>
<ul>
<li><strong>url</strong> <code>String</code> - URL with the API version, always <em><a href="https://scalr.api.appbase.io">https://scalr.api.appbase.io</a></em></li>
<li><strong>appname</strong> <code>String</code> - name of the app as displayed in the <a href="https://appbase.io/scalr">dashboard</a></li>
<li><strong>username</strong> <code>String</code> - username as displayed in the app dashboard</li>
<li><strong>password</strong> <code>String</code> - password as displayed in the app dashboard</li>
</ul>
</li>
</ul><p><strong>Returns</strong></p><p><code>Object</code> <strong>appbaseObj</strong> <em>Appbase reference object</em> - has <code>index()</code>, <code>delete()</code>, <code>bulk()</code>, <code>search()</code>, <code>streamDocument()</code> and <code>streamSearch()</code> methods.</p><h2 id="javascript-api-reference-writing-data">WRITING DATA</h2><h3 id="javascript-api-reference-writing-data-index">index()</h3><p>Writes a JSON data object at a given <code>type</code> and <code>id</code> location, or updates if an object already exists.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">appbaseObj</span><span class="pun">.</span><span class="pln">index</span><span class="pun">({</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"tweet"</span></span><span class="pun">,</span><span class="pln">
  id</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"</span><span class="number"><span class="str">1</span></span><span class="str">"</span></span><span class="pun">,</span><span class="pln">
  body</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="string"><span class="str">"msg"</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"writing my first tweet!"</span></span><span class="pun">,</span><span class="pln">
    </span><span class="string"><span class="str">"by"</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"jack"</span></span><span class="pun">,</span><span class="pln">
    </span><span class="string"><span class="str">"using"</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">"appbase.io"</span></span><span class="pun">,</span><span class="pln"> </span><span class="string"><span class="str">"javascript"</span></span><span class="pun">,</span><span class="pln"> </span><span class="string"><span class="str">"streams"</span></span><span class="pun">],</span><span class="pln">
    </span><span class="string"><span class="str">"test"</span></span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'data'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"successfully indexed: "</span></span><span class="pun">,</span><span class="pln"> res</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'error'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"indexing error: "</span></span><span class="pun">,</span><span class="pln"> err</span><span class="pun">);</span><span class="pln">
</span><span class="pun">})</span></code></pre><p><strong>Usage</strong></p><p><code>appbaseObj.index(params)</code></p><ul>
<li><p><strong>params</strong> <code>Object</code> - A Javascript object containing the type, id and the JSON data to be indexed</p>
<ul>
<li><strong>type</strong> <code>String</code> - The type (aka collection) under which the data will be indexed</li>
<li><strong>body</strong> <code>Object</code> - Data to be indexed, a valid JSON object</li>
<li><strong>*id</strong> <code>String</code> - ID for the JSON data. <code>id</code> is auto generated if not specified</li>
</ul>
</li>
</ul><h3 id="javascript-api-reference-writing-data-delete">delete()</h3><p>Delete a JSON data object by <code>id</code>.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">appbaseObj</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">({</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"tweet"</span></span><span class="pun">,</span><span class="pln">
  id</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"</span><span class="number"><span class="str">1</span></span><span class="str">"</span></span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'data'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"successfully deleted: "</span></span><span class="pun">,</span><span class="pln"> res</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'error'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"deletion error: "</span></span><span class="pun">,</span><span class="pln"> err</span><span class="pun">);</span><span class="pln">
</span><span class="pun">})</span></code></pre><p><strong>Usage</strong></p><p><code>appbaseObj.delete(params)</code></p><ul>
<li><p><strong>params</strong> <code>Object</code> - A Javascript object containing the <code>type</code> and <code>id</code> of the JSON object to be deleted</p>
<ul>
<li><strong>type</strong> <code>String</code> - The type (aka collection) of the object to be deleted</li>
<li><strong>id</strong> <code>String</code> - ID for the JSON data</li>
</ul>
</li>
</ul><h3 id="javascript-api-reference-writing-data-bulk">bulk()</h3><p>Apply many index / delete operations together, useful when importing data for the first time.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">appbaseObj</span><span class="pun">.</span><span class="pln">bulk</span><span class="pun">({</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"tweet"</span></span><span class="pun">,</span><span class="pln">
  body</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="comment"><span class="com">// action#</span><span class="number"><span class="com">1</span></span><span class="com"> description</span></span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> index</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> _id</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">2</span></span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
    </span><span class="comment"><span class="com">// the JSON data to index</span></span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> </span><span class="string"><span class="str">"msg"</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"writing my second tweet!"</span></span><span class="pun">,</span><span class="pln">
      </span><span class="string"><span class="str">"by"</span></span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"Ev"</span></span><span class="pun">,</span><span class="pln">
      </span><span class="string"><span class="str">"using"</span></span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="string"><span class="str">"appbase.io"</span></span><span class="pun">,</span><span class="pln"> </span><span class="string"><span class="str">"javascript"</span></span><span class="pun">,</span><span class="pln"> </span><span class="string"><span class="str">"streams"</span></span><span class="pun">],</span><span class="pln">
      </span><span class="string"><span class="str">"test"</span></span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">},</span><span class="pln">
    </span><span class="comment"><span class="com">// action#</span><span class="number"><span class="com">2</span></span><span class="com"> description</span></span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">delete</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> _id</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">2</span></span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
    </span><span class="comment"><span class="com">// deletion doesn</span><span class="string"><span class="com">'t any further input</span></span><span class="pln">
  </span><span class="pun">]</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="str">'</span></span><span class="str">data</span><span class="string"><span class="str">'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"successful bulk: "</span></span><span class="pun">,</span><span class="pln"> res</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="str">'</span></span><span class="str">error'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"bulk failed: "</span></span><span class="pun">,</span><span class="pln"> err</span><span class="pun">);</span><span class="pln">
</span><span class="pun">})</span></code></pre><p><strong>Usage</strong></p><p><code>appbaseObj.bulk(params)</code></p><ul>
<li><p><strong>params</strong> <code>Object</code> - A Javascript object containing the <code>body</code> and optionally a default <code>type</code> to be used for actions</p>
<ul>
<li><strong>body</strong> <code>String</code> - A Javascript array of actions to be performed written as a sequence of action#1, data#1, action#2, data#2, … action#n, data#n</li>
<li><strong>*type</strong> <code>String</code> - Default document type for actions that don’t provide one</li>
</ul>
</li>
</ul><h2 id="javascript-api-reference-streaming-data">STREAMING DATA</h2><h3 id="javascript-api-reference-streaming-data-streamdocument">streamDocument()</h3><p>Continuously stream a specific JSON document.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">appbaseObj</span><span class="pun">.</span><span class="pln">streamDocument</span><span class="pun">({</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"tweet"</span></span><span class="pun">,</span><span class="pln">
  id</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="pun">,</span><span class="pln">
  streamonly</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'data'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"data update: "</span></span><span class="pun">,</span><span class="pln"> res</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'error'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"streaming error: "</span></span><span class="pun">,</span><span class="pln"> err</span><span class="pun">);</span><span class="pln">
</span><span class="pun">})</span></code></pre><p><strong>Usage</strong></p><p><code>appbaseObj.streamDocument(params)</code></p><ul>
<li><p><strong>params</strong> <code>Object</code> - A Javascript object containing the <code>type</code> and <code>id</code> of the document to be streamed. Optionally, it can also contain a <code>streamonly</code> field to stream only the new updates and not return the original value</p>
<ul>
<li><strong>type</strong> <code>String</code> - Document type</li>
<li><strong>id</strong> <code>String</code> - Document ID</li>
<li><strong>*streamonly</strong> <code>Boolean</code> - <code>false</code> by default. A value <code>true</code> returns only the new document updates and not the original value</li>
</ul>
</li>
</ul><p><strong>Returns</strong></p><p><a href="https://nodejs.org/api/stream.html#stream_class_stream_readable">stream.Readable</a> <code>Object</code> with</p><ul>
<li><code>'data'</code> and <code>'error'</code> event handlers</li>
<li>a <strong>stop()</strong> method to stop the stream</li>
</ul><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> responseStream </span><span class="pun">=</span><span class="pln"> appbaseObj</span><span class="pun">.</span><span class="pln">streamDocument</span><span class="pun">({</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"tweet"</span></span><span class="pun">,</span><span class="pln">
  id</span><span class="pun">:</span><span class="pln"> </span><span class="number"><span class="lit">1</span></span><span class="pun">,</span><span class="pln">
  streamonly</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">false</span><span class="pln">
</span><span class="pun">})</span><span class="pln">

responseStream</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'data'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"data update: "</span></span><span class="pun">,</span><span class="pln"> res</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

responseStream</span><span class="pun">.</span><span class="pln">stop</span><span class="pun">();</span></code></pre><p><code>Note:</code> appbase.js lib uses websockets (on the browser) and http-streams (on node.js) to stream the updates.</p><h3 id="javascript-api-reference-streaming-data-streamsearch">streamSearch()</h3><p>Continuously stream results of search query on a given <code>type</code>. Search queries can be simple monitoring queries, finding an exact set of documents, full-text search queries, geolocation queries.</p><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="pln">appbaseObj</span><span class="pun">.</span><span class="pln">streamSearch</span><span class="pun">({</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"tweet"</span></span><span class="pun">,</span><span class="pln">
  body</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    query</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      match_all</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">},</span><span class="pln">
  streamonly</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'data'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"query update: "</span></span><span class="pun">,</span><span class="pln"> res</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}).</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'error'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">err</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"streaming error: "</span></span><span class="pun">,</span><span class="pln"> err</span><span class="pun">);</span><span class="pln">
</span><span class="pun">})</span></code></pre><p><strong>Usage</strong></p><p><code>appbaseObj.streamSearch(params)</code></p><ul>
<li><p><strong>params</strong> <code>Object</code> - A Javascript object containing the query <code>type</code> and <code>body</code>, and optionally a <code>streamonly</code> field to stream only the new matching documents (without returning the existing matches)</p>
<ul>
<li><strong>type</strong> <code>String</code> - Document type</li>
<li><strong>body</strong> <code>String</code> - A JSON object specifying a valid query in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html">ElasticSearch Query DSL</a> format</li>
<li><strong>*streamonly</strong> <code>Boolean</code> - <code>false</code> by default. A value <code>true</code> returns only the new matches after the query and not the existing ones</li>
</ul>
</li>
</ul><p><strong>Returns</strong></p><p><a href="https://nodejs.org/api/stream.html#stream_class_stream_readable">stream.Readable</a> <code>Object</code> with</p><ul>
<li><code>'data'</code> and <code>'error'</code> event handlers</li>
<li>a <strong>stop()</strong> method to stop the stream</li>
</ul><pre><code class="lang-js prettyprint prettyprinted" style=""><span class="kwd">var</span><span class="pln"> responseStream </span><span class="pun">=</span><span class="pln"> appbaseObj</span><span class="pun">.</span><span class="pln">streamSearch</span><span class="pun">({</span><span class="pln">
  type</span><span class="pun">:</span><span class="pln"> </span><span class="string"><span class="str">"tweet"</span></span><span class="pun">,</span><span class="pln">
  body</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    query</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      match_all</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">},</span><span class="pln">
  streamonly</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
</span><span class="pun">})</span><span class="pln">

responseStream</span><span class="pun">.</span><span class="pln">on</span><span class="pun">(</span><span class="string"><span class="str">'data'</span></span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="string"><span class="str">"data update: "</span></span><span class="pun">,</span><span class="pln"> res</span><span class="pun">);</span><span class="pln">
</span><span class="pun">});</span><span class="pln">

setTimeout</span><span class="pun">(</span><span class="pln">responseStream</span><span class="pun">.</span><span class="pln">stop</span><span class="pun">,</span><span class="pln"> </span><span class="number"><span class="lit">5000</span></span><span class="pun">);</span><span class="pln"> </span><span class="comment"><span class="com">// stop stream after </span><span class="number"><span class="com">5</span></span><span class="com">s</span></span></code></pre></div>
  <a class="edit" ng-href="https://github.com/appbaseio/Docs/tree/master/src/scalr/javascript/api-reference.md" target="_blank" href="https://github.com/appbaseio/Docs/tree/master/src/scalr/javascript/api-reference.md">
    <span class="fa fa-pencil"> Edit</span>
  </a>
</div></div>
  <script type="text/javascript" src="../../scripts/analytics.js"></script>
  <script type="text/javascript" src="../../scripts/main.js"></script>
  <script type="text/javascript" src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

</body></html>